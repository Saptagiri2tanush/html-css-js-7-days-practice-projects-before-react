<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Filter and cart </title>
    <style>
   *{
    margin : 0px;
    padding : 0px;
    box-sizing : border-box;
   }
   body{
    font-family: Arial, sans-serif;
    background-color: #f5f5f5;
    padding : 20px;
   }
   .container{
    max-width : 1200px;
    margin : 0 auto;
    display : grid;
    grid-template-columns: 3fr 1fr;
    gap : 20px;
   }
   header{
    grid-column: 1 / -1;
    padding : 20px;
    background-color : white;
    border-radius: 8px;
    box-shadow : 0 2px 4px rgba(0, 0, 0 , 0.1);
   }
   h1{
    margin-bottom: 20px;
    color : #333;
   }
   .filters{
    display : flex;
    gap : 10px;
    flex-wrap : wrap;
   }
   #search{
    flex : 1;
    min-width:200px;
   }
   input[type = "text"],select{
    padding : 10px;
    border : 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
   }
   select{
    min-width : 150px;
   }
   .product-grid{
   display : grid;
   grid-template-columns: repeat(auto-fill,minmax(250px, 1fr));
   gap : 20px;
   }
   .product-card{
    background-color: white;
    padding : 20px;
    border-radius: 8px;
    box-shadow : 0 2px 4px rgba(0, 0, 0 , 0.1);
   }
   .product-card h3{
    margin-bottom : 10px;
    color : #333;
   }
   .product-card p{
    margin : 5px 0;
    color : #666 ;
   }
   .product-card button{
    margin-top : 10px;
    padding: 10px 20px;
    background-color: #007bff;
    color : white;
    border : none;
    border-radius : 4px;
    cursor : pointer;
   }
   aside{
    background-color: white;
    padding : 20px;
    border-radius: 8px;
    box-shadow : 0 2px 4px rgba(0, 0, 0 , 0.1);
    position : sticky;
    top : 20px;
    height : fit-content;
   }
   aside h2{
    margin-bottom: 15px;
    color : #333;
   }
   aside p {
    font-size : 18px;
    font-weight : bold;
    color : #333;
   }
   
    </style>
</head>
<body>
    <div class="container">
        <header>
    <h1>Product Store</h1>
    <div class="filters">
    <input type = "text" id ="search" placeholder="Search products">
    <select id = "category-filter">
        <option value = "all">All Categories</option>
        <option value = "Clothes">Clothes</option>
        <option value = "Shoes">Shoes</option>
        <option value = "Accessories">Accessories</option>
    </select>
    <select id = "price-filter">
        <option value = "all">All Prices</option>
        <option value = "low">Under 30$</option>
        <option value = "mid">$30-$60</option>
        <option value = "high">Above $60</option>
    </select>
    <select id = "sort">
        <option value = "default">Sort By</option>
        <option value = "low-high">Price : Low to High</option>
        <option value = "high-low">Price : high to Low</option>
       

    </select>
    </div>
    </header>

    <main>
        <section id = "products" class="product-grid">

        </section>
    </main>
    <aside>
        <h2>Cart</h2>
        <ul id = "cart-items">

        </ul>
        <p>Total: $<span id = "total-price">0</span></p>
    </aside>
    </div>
<script>
   
const products = [
    {id : 1, name : "T-shirt",category: "Clothes",price : 25},
    {id : 2, name : "Jeans",category: "Clothes",price : 50},
    {id : 3, name : "Sneakers",category: "Shoes",price : 70},
    {id : 4, name : "Hat",category: "Accessories",price : 15},
    {id : 5, name : "Socks",category: "Clothes",price : 10},
    {id : 6, name : "Boots",category: "Shoes",price : 90},
    {id : 7, name : "Scarf",category: "Accessories",price : 20}
];

let productContainer = document.getElementById("products");
let inputElement = document.getElementById("search");
let categoryElement = document.getElementById("category-filter");
let priceElement = document.getElementById("price-filter");
let sortElement = document.getElementById("sort");
let totalElement = document.getElementById("total-price");
let cartElement = document.getElementById("cart-items");

console.log(totalElement);
let cart = [];

function productDisplay(list) {
    productContainer.innerHTML = list.map(p => `
        <div class="product-card">
            <h3>${p.name}</h3>
            <p>Category: ${p.category}</p>
            <p>Price: $${p.price}</p>
            <button onclick="addToCart(${p.id})">Add to cart</button>
        </div>
    `).join("");
}

function addToCart(productId){
   console.log(productId);
   let product;
   for(let i = 0; i < products.length; i ++){
    if(products[i].id === productId){
       product = products[i];
       break;
    }
   }
   cart.push(product);
   console.log(cart);
   updateCart();
}

function updateCart(){
cartElement.innerHTML = cart.map(p => `
                    <li>${p.name}:$${p.price}</li>`
).join("");
const total = cart.reduce((sum,p) => sum + p.price,0);
totalElement.innerText = total;
}

function filterProducts(){

    let filtered = [...products];

    const searchText = inputElement.value.toLowerCase();

    if(searchText){
        filtered = filtered.filter(p =>
            p.name.toLowerCase().includes(searchText)
        );
    }

    const category = categoryElement.value;

        if(category !== "all"){
        filtered = filtered.filter(p =>
            p.category === category
        );}
        //console.log(filtered);
    
    const price = priceElement.value;
   // console.log(price);

       if(price !== "all"){
       if(price === "low"){
       filtered = filtered.filter(p =>
           p.price < 30
       );
       }
      else if(price === "mid"){
        filtered = filtered.filter(p => 
            p.price >= 30 && p.price <= 60
        );
       }
     else{
        filtered = filtered.filter(p => 
            p.price > 60
        );
     }
    }
     const sort = sortElement.value;
     if(sort !== "default"){
        if(sort === "low-high"){filtered.sort((a,b) => a.price - b.price);}
        else{ filtered .sort((a,b) => b.price - a.price);}
     }
    //console.log(filtered);
    
   
       

    productDisplay(filtered);
}


inputElement.addEventListener("input", filterProducts);
categoryElement.addEventListener("change", filterProducts);
priceElement.addEventListener("change", filterProducts);
sortElement.addEventListener("change", filterProducts);

productDisplay(products);
</script>
</body>
</html>